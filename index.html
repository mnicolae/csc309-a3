<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    
    <!--- JQuery Mobile -->
    <script src="js/jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
    <script>
    // function for reading the JSON file
    function readJSON(files){
        var reader = new FileReader();
        reader.onloadend = handleReader;
        reader.readAsBinaryString(document.getElementById('jsonInput').files[0]);
    }

    // Return an array of recreated tweets
    function handleReader(evt) {
        var fileContent = evt.target.result;
        var JSONarray = jQuery.parseJSON(fileContent);

        var tweets = [];
        jQuery.each(JSONarray, function(index, value){
            tweets.push({
                "created_at" : JSONarray[index].created_at,
                "text" : JSONarray[index].text,
                "source" : JSONarray[index].source,
                "retweet_count" : JSONarray[index].retweet_count,
                //favorites count ?
                });
            alert(tweets[index].retweet_count); // For testing purposes only
        });
    
        return tweets;
    }
    </script>

    <!-- 
    <script src="js/tweets" type="text/javascript"></script>
    <link rel="stylesheet" href="css/jquery.mobile-1.3.0.min.css">
    <link rel="stylesheet" href="css/jqm-demos.css"> 
    -->
    
    <!--- User defined Javascript / CSS -->
    <link rel="stylesheet" href="css/custom.css">

</head>
<body>
    <input id="jsonInput" type="file" onchange="readJSON()"/>
    <p>Choose a json file</p>

	<!-- main navigation page -->
	<div data-role="page">
    	
    	<!-- header -->
    	<!-- add header here -->
    
    	<!-- content -->
    	<div data-role="content">
        	<ul id="tweets" data-role="listview" data-inset="true">
              	<!-- tweets go here. -->  
            </ul>
    	</div>
    	
    	<!-- footer -->
    	<!-- add footer here -->
	</div>   

</body>
</html>